<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Portfolio — Redesign (Profile Update)</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="brand">Faridi — Portfolio</h1>
      <nav aria-label="Main navigation">
        <ul class="nav">
          <li><a href="#about">About</a></li>
          <li><a href="#gallery">Gallery</a></li>
          <li><a href="#ai-helper">AI Helper</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="about" class="profile">
      <h2>Profile</h2>
      <p class="lead">A responsive avatar layout, optimized for different screen sizes and accessibility.</p>

      <div class="avatar-grid" role="list">
        <figure role="listitem" class="avatar">
          <img src="/assets/placeholders/avatar-1.png" alt="Avatar 1 — placeholder" loading="lazy">
          <figcaption>Avatar 1</figcaption>
        </figure>
        <figure role="listitem" class="avatar">
          <img src="/assets/placeholders/avatar-2.png" alt="Avatar 2 — placeholder" loading="lazy">
          <figcaption>Avatar 2</figcaption>
        </figure>
        <figure role="listitem" class="avatar">
          <img src="/assets/placeholders/avatar-3.png" alt="Avatar 3 — placeholder" loading="lazy">
          <figcaption>Avatar 3</figcaption>
        </figure>
        <figure role="listitem" class="avatar">
          <img src="/assets/placeholders/avatar-4.png" alt="Avatar 4 — placeholder" loading="lazy">
          <figcaption>Avatar 4</figcaption>
        </figure>
      </div>
    </section>

    <section id="gallery" class="gallery">
      <h2>Gallery</h2>
      <p class="lead">A simple responsive gallery with asset placeholders for images and video thumbnails.</p>

      <div class="gallery-grid">
        <article class="card">
          <picture>
            <source srcset="/assets/placeholders/photo-1.webp" type="image/webp">
            <img src="/assets/placeholders/photo-1.png" alt="Project screenshot placeholder" loading="lazy">
          </picture>
          <h3>Project One</h3>
        </article>

        <article class="card">
          <picture>
            <source srcset="/assets/placeholders/photo-2.webp" type="image/webp">
            <img src="/assets/placeholders/photo-2.png" alt="Project screenshot placeholder" loading="lazy">
          </picture>
          <h3>Project Two</h3>
        </article>

        <article class="card">
          <picture>
            <source srcset="/assets/placeholders/photo-3.webp" type="image/webp">
            <img src="/assets/placeholders/photo-3.png" alt="Project screenshot placeholder" loading="lazy">
          </picture>
          <h3>Project Three</h3>
        </article>

        <article class="card">
          <picture>
            <source srcset="/assets/placeholders/photo-4.webp" type="image/webp">
            <img src="/assets/placeholders/photo-4.png" alt="Project screenshot placeholder" loading="lazy">
          </picture>
          <h3>Project Four</h3>
        </article>
      </div>
    </section>

    <section id="ai-helper" class="ai-helper">
      <h2>AI Helper</h2>
      <p class="lead">A lightweight assistant that forwards messages to a Netlify function. The function is a placeholder and can be wired to OpenAI or another LLM by setting environment variables.</p>

      <form id="ai-form" aria-label="AI helper form">
        <label for="prompt">Ask something</label>
        <textarea id="prompt" name="prompt" rows="3" placeholder="Ask the AI helper to summarise, suggest changes or give feedback..."></textarea>
        <div class="form-actions">
          <button type="submit">Send</button>
        </div>
      </form>

      <section id="ai-response" class="ai-response" aria-live="polite"></section>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>© 2025 Faridi — portfolio redesign</small>
    </div>
  </footer>

  <script>
    // Simple client-side helper to call the Netlify function at /.netlify/functions/chat
    const form = document.getElementById('ai-form');
    const promptEl = document.getElementById('prompt');
    const responseEl = document.getElementById('ai-response');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const prompt = promptEl.value.trim();
      if (!prompt) return;
      responseEl.textContent = 'Thinking...';

      try {
        const res = await fetch('/.netlify/functions/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: prompt })
        });

        if (!res.ok) throw new Error('Server error');
        const data = await res.json();
        responseEl.textContent = data.reply || 'No reply — check function logs.';
      } catch (err) {
        responseEl.textContent = 'Error: ' + err.message;
      }
    });
  </script>
</body>
</html>